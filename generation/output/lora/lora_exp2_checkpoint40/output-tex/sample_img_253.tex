\documentclass[a4paper]{article}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage[utf8]{inputenc}
\usepackage{xcolor}
\usepackage{tikz}

\begin{document}

\begin{tikzpicture}[scale=0.7]
			\draw (-1,-3) rectangle (6.5,3);
			\node at (3,3) {$\mathcal{G}$};
			\filldraw[black] (2,-1) circle (3pt) node[right] {$u_0$};
			\draw (0,0) rectangle (1.8,1.8);
			\node at (0.9,0.9) {$R$};
			\filldraw[black] (1,1.5) circle (3pt) node[right] {$u_{M_R}$};
			\draw (2,0) rectangle (3.2,1.2);
			\node at (2.6,0.6) {$B$};
			\draw (3.4,0) rectangle (4.6,1.2);
			\node at (3.8,0.6) {$E$};
			\draw (5,0) rectangle (6.4,1.2);
			\node at (5.8,0.6) {$A$};
			\draw[dotted] (5.8,0.6) -- (5.8,1.2);
			\draw[dotted] (5.8,0.6) -- (5.2,0.6);
			\draw[dotted] (5.2,0.6) -- (5.2,1.2);
			\draw[dotted] (5.2,1.2) -- (5.8,1.2);
			\node at (3.4,1.2) {$B$};
			\draw[dotted] (3.4,1.2) -- (3.4,0);
			\draw[dotted] (3.4,0) -- (4.6,0);
			\draw[dotted] (4.6,0) -- (4.6,1.2);
			\node at (3.4,0) {$U$};
			\node at (4.6,1.2) {$Y(W_1)$};
			\node at (4.6,0) {$Y(W_2)$};
			\node at (4.6,-0.6) {$y_3$};
			\node at (4.6,-1.8) {$W_3$};
			\node at (3.4,-1.8) {$W_2$};
			\node at (2,-2.4) {$W_1$};
			\node at (5.8,0.6) {$Y(W)$};
			\filldraw[black] (2.5,-0.6) circle (3pt) node[right] {$v_0$};
			\filldraw[black] (2.5,0.6) circle (3pt) node[right] {$v_1$};
			\filldraw[black] (5.8,1.8) circle (3pt) node[right] {$v_3$};
			\filldraw[black] (5.8,-0.6) circle (3pt) node[right] {$v_2$};
			\filldraw[black] (2.5,1.8) circle (3pt) node[right] {$u_1$};
			\filldraw[black] (2.5,-0.6) circle (3pt) node[right] {$u_2$};
			\filldraw[black] (2.5,-0.6) circle (3pt) node[right] {$u_3$};
			\draw[dotted] (2.5,0) -- (2.5,-2.5);
			\draw[dotted] (2.5,-2.5) -- (5.8,-2.5);
			\draw[dotted] (5.8,-2.5) -- (5.8,0);
			\draw[dotted] (5.8,0) -- (2.5,0);
			\filldraw[black] (2.5,0) circle (3pt) node[right] {$u_3$};
			\filldraw[black] (2.5,0) circle (3pt) node[right] {$u_2$};
			\filldraw[black] (2.5,-2.5) circle (3pt) node[right] {$u_0$};
			\filldraw[black] (5.8,0) circle (3pt) node[right] {$u_1$};
			\filldraw[black] (5.8,-2.5) circle (3pt) node[right] {$u_3$};
			\draw[dotted] (3.4,0) -- (3.4,1.2);
			\draw[dotted] (3.4,1.2) -- (4.6,1.2);
			\draw[dotted] (4.6,1.2) -- (4.6,0);
			\draw[dotted] (4.6,0) -- (3.4,0);
			\node at (4.6,0) {$Y(W_1)$};
			\node at (4.6,1.2) {$Y(W_2)$};
			\draw[dotted] (5.8,0) -- (5.8,1.2);
			\draw[dotted] (5.8,1.2) -- (6.4,1.2);
			\draw[dotted] (6.4,1.2) -- (6.4,0);
			\draw[dotted] (6.4,0) -- (5.8,0);
			\draw[dotted] (3.4,1.2) -- (4.6,1.2);
			\draw[dotted] (3.4,1.2) -- (3.4,0);
			\draw[dotted] (3.4,0) -- (4.6,0);
			\draw[dotted] (4.6,0) -- (4.6,1.2);
			\draw[dotted] (5.8,1.2) -- (5.8,0);
			\draw[dotted] (5.8,0) -- (6.4,0);
			\draw[dotted] (6.4,0) -- (6.4,1.2);
			\draw[dotted] (6.4,1.2) -- (5.8,1.2);
			\node at (2.5,1.2) {$Y(W)$};
			\node at (2.5,-0.6) {$W'$};
			\draw[dotted] (2.5,0) -- (2.5,-0.6);
			\draw[dotted] (2.5,-0.6) -- (5.8,-0.6);
			\draw[dotted] (5.8,-0.6) -- (5.8,0);
			\draw[dotted] (5.8,0) -- (2.5,0);
			\node at (5.8,-0.6) {$W'_2$};
			\draw[dotted] (2.5,0) -- (2.5,1.2);
			\draw[dotted] (2.5,1.2) -- (5.8,1.2);
			\draw[dotted] (5.8,1.2) -- (5.8,0);
			\draw[dotted] (5.8,0) -- (2.5,0);
			\node at (2.5,1.2) {$W'$};
			\draw[dotted] (5.8,0) -- (5.8,-0.6);
			\draw[dotted] (5.8,-0.6) -- (6.4,-0.6);
			\draw[dotted] (6.4,-0.6) -- (6.4,0);
			\draw[dotted] (6.4,0) -- (5.8,0);
			\node at (6.4,-0.6) {$W'_3$};
			\draw[dotted] (5.8,0) -- (5.8,1.2);
			\draw[dotted] (5.8,1.2) -- (6.4,1.2);
			\draw[dotted] (6.4,1.2) -- (6.4,0);
			\draw[dotted] (6.4,0) -- (5.8,0);
			\node at (6.4,1.2) {$W'$};
			\begin{scope}[xshift=