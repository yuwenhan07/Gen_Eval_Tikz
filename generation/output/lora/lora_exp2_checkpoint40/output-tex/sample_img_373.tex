\begin{tikzpicture}[every node/.style={inner sep=0pt},
    >=Triangle, 
    node distance=7mm and 4mm,
    base/.style={draw,font=\scriptsize,text width=16mm,align=center,inner sep=1mm},
    block/.style={base,minimum height=7mm},
    process/.style={base,rounded corners,fill=blue!20,minimum height=12mm},
    decision/.style={base,rounded corners,fill=orange!20,minimum height=12mm},
    arrow/.style={-latex,very thick},
    label/.style={font=\small}]

  % Draw nodes
  \node [block,anchor=south east]         (rslam)       {\textcolor{red}{Graph-based \\SLAM}};
  \node [process,anchor=east,xshift=-2mm,yshift=-9mm] (local)       {Local \\Traversability};
  \node [decision,anchor=north,xshift=-2mm,yshift=9mm] (global)      {Global \\Traversability};
  \node [decision,anchor=south east,xshift=18mm]        (frontier)     {Frontier \\ detection};
  \node [process,anchor=east,xshift=-2mm,yshift=-3mm]   (cloud)       {Point cloud};
  \node [decision,anchor=east,xshift=18mm,yshift=-3mm]  (goal)        {Candidate \\Goals};
  \node [process,anchor=east,xshift=18mm,yshift=3mm]    (planning)     {Planning};
  \node [block,anchor=north west,xshift=-1mm]           (img)         {Images};
  \node [block,anchor=south west,xshift=-1mm]           (odom)        {Odometry};
  \node [process,anchor=south west]                    (path)         {Best \\ Selected \\ path};

  % Draw arrows
  \begin{scope}[on background layer]
    \draw [arrow](rslam) -- ++(2mm,0) |- node [near end,above,label] {\scriptsize Current pose}(global);
    \draw [arrow](cloud) -- ++(-1mm,0) |- node [near end,above,label] {\scriptsize Binary \\ \textit{traversability}}(global);
    \draw [arrow](global) |- node [pos=0.9,below,label] {\scriptsize Traversibility scores}(frontier);
    \draw [arrow](frontier) -- ++(2mm,0) |- node [near end,above,label] {\scriptsize Frontier \\ detection}(goal);
    \draw [arrow](goal) |- node [pos=0.9,below,label] {\scriptsize Candidate goals}(planning);
    \draw [arrow](cloud) -| node [pos=0.9,below,label] {\scriptsize Point cloud}(local);
    \draw [arrow](img) -- node [pos=0.9,below,label] {\scriptsize Images}(rslam);
    \draw [arrow](odom) -- node [pos=0.9,below,label] {\scriptsize Odometry}(rslam);
    \draw [arrow](planning) -- ++(-2mm,0) |- node [pos=0.9,below,label] {\scriptsize $N$ best \\ \textit{Goals}}(goal);
  \end{scope}
  % Draw processes
  \draw [arrow](goal) -- ++(-2mm,0) |- node [pos=0.9,below,label] {\scriptsize Level 1 utility \\ ($u_1)=(\Delta E,\;\rho)$}(path);
  \draw [arrow](goal) -- ++(-2mm,0) |- node [pos=0.9,below,label] {\scriptsize Level 2 utility \\ ($u_2)=\operatorname{tr}(I_p)$}(path);
  % Draw labels
  \node [anchor=east,xshift=-4mm,yshift=6mm] at (rslam.north east) {\scriptsize Rover properties};
  \node [anchor=east,xshift=-4mm,yshift=-6mm] at (rslam.south east) {\scriptsize Graph-based \\ SLAM};
  \node [anchor=east,xshift=-4mm,yshift=-6mm] at (global.south east) {\scriptsize Global};
  \node [anchor=east,xshift=-4mm,yshift=6mm] at (global.north east) {\scriptsize Traversability};
  \node [anchor=east,xshift=-4mm,yshift=-3mm] at (local.south east) {\scriptsize Local};
  \node [anchor=east,xshift=-4mm,yshift=3mm] at (local.north east) {\scriptsize Traversability};
  \node [anchor=east,xshift=-4mm,yshift=-6mm] at (frontier.south east) {\scriptsize Frontier};
  \node [anchor=east,xshift=-4mm,yshift=6mm] at (frontier.north east) {\scriptsize detection};
  \node [anchor=east,xshift=-4mm,yshift=-6mm] at (planning.south east) {\scriptsize Planning};
  \node [anchor=east,xshift=-4mm,yshift=6mm] at (planning.north east) {\scriptsize \textcolor{cyan}{Mapping}};
  \node [anchor=east,xshift=-4mm,yshift=-6mm] at (path.south east) {\scriptsize Best \\ Selected \\ path};
\end{tikzpicture}