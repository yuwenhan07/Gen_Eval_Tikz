\begin{tikzpicture}[transform shape,remember picture,align=center]
        \node[anchor=north,rectangle,draw,minimum width=3cm, minimum height=2cm] (t) {Teacher pattern $\xi^*$};
        \node[anchor=north,rectangle,draw,minimum width=3cm, minimum height=2cm,below=4cm of t] (d) {Data $x$ \\with known \\labels $y$};
        \draw[dashed] (t) -- (d);
        \node[anchor=north,rectangle,draw,minimum width=3cm, minimum height=2cm,below right=2cm of t] (w) {Weights $w$};
        \node[anchor=north,rectangle,draw,minimum width=3cm, minimum height=2cm,right=4cm of w] (s) {Student pattern $\xi$};
        \node[anchor=north,rectangle,draw,minimum width=3cm, minimum height=2cm,below=4cm of s] (u) {Data $x$ \\with predicted \\labels $y'$};
        \draw[dashed] (s) -- (u);
        \node[anchor=center,rectangle,draw,minimum width=3cm, minimum height=2cm,above right=of t] (e) {Examples $\sigma$};
        \node[anchor=center,below=of e] (b) {\scriptsize Backward\\ propagation};
        \node[anchor=center,below=of w] (f) {\scriptsize Forward\\ propagation};
        \draw[->] (t.east)-- node[above] {$H\left(\sigma|\xi^*\right)$} (e.west);
        \draw[->] (e.east)-- node[above] {$H\left(\xi^b|\sigma\right)$} (s.west);
        \draw[->] (d.east)-- (w.west);
        \draw[->] (w.east)-- (s.west);
        \draw[->] (u.east)-- (s.west);
    \end{tikzpicture}