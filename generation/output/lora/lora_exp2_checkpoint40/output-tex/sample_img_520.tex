\begin{tikzpicture}[scale=2,auto]
  \def\xmax{4}
  \def\xmin{-0.3}
  \def\ymax{1.5}
  \def\ymin{-1}
  \coordinate (I) at ({(k/2)*xmin},{funprime(xmin)});
  \coordinate (J) at ({(k/2)*xmax},{funprime(xmax)});
  \coordinate (I+) at ({(k/2)*(xmin+0.06)},func(xmin+0.06));
  \coordinate (I-) at ({(k/2)*(xmin-0.06)},func(xmin-0.06));
  \coordinate (J+) at ({(k/2)*(xmax+0.06)},func(xmax+0.06));
  \coordinate (J-) at ({(k/2)*(xmax-0.06)},func(xmax-0.06));
  \draw[gray!50] (\xmin,\ymin)--node[pos=0.2,anchor=north west,sloped]{$x\ln{x}$}+(\xmax,\ymin);
  \draw[gray!50] (\xmin,\ymin+1)--node[pos=0.2,anchor=north west,sloped]{$(1+a)x\ln{x}$}+(\xmax,\ymin+1);
  \draw[gray!50] (\xmin,\ymin+2)--node[pos=0.2,anchor=north west,sloped]{$(1+2a)x\ln{x}$}+(\xmax,\ymin+2);
  \begin{scope}[on background layer]
    \draw[black,thick] ({(k/2)*xmin},{funprime(xmin)})--({(k/2)*xmax},{funprime(xmax)});
    \draw[decorate,decoration={snake,segment length=2mm,amplitude=2pt}] (\xmin,I) node[left=5pt]{$x$}--({(k/2)*xmin},{funprime(xmin)});
    \draw[decorate,decoration={snake,segment length=2mm,amplitude=2pt}] ({(k/2)*xmax},{funprime(xmax)})--({(k/2)*xmax},J);
    \filldraw[red] ({(k/2)*xmin},{funprime(xmin)}) circle[radius=0.7pt];
    \draw[red,-{Stealth[length=3mm]},line width=0.8pt,domain=\xmin:\xmax,samples=91,smooth]
      plot ({\x},{fun(\x)});
    \draw[red,-{Stealth[length=3mm]},line width=0.8pt,domain={\xmin}:{(k/2)*xmin}]
      plot ({\x},{fun(\x)});
    \draw[red,-{Stealth[length=3mm]},line width=0.8pt,domain={(k/2)*xmax}:{\xmax}]
      plot ({\x},{fun(\x)});
    \filldraw[red] ({(k/2)*xmin},{funprime(xmin)}) circle[radius=0.7pt];
    \draw[red,-{Stealth[length=3mm]},line width=0.8pt,domain={\xmin}:{(k/2)*xmin}]
      plot ({\x},{func(\x)});
    \draw[red,-{Stealth[length=3mm]},line width=0.8pt,domain={(k/2)*xmin}:{(k/2)*xmax}]
      plot ({\x},{fun(\x)});
    \draw[red,-{Stealth[length=3mm]},line width=0.8pt,domain={(k/2)*xmax}:{\xmax}]
      plot ({\x},{func(\x)});
  \end{scope}
\end{tikzpicture}