\documentclass[tikz]{standalone}
\usetikzlibrary{positioning,arrows.meta,decorations.pathmorphing}
\tikzset{
  resource/.style={minimum width=50pt,minimum height=12mm,font=\small,align=center},
  layer/.style={resource,fill=#1},
  resource grid/.style args={#1/#2/#3/#4}{
    resource grid list/.list={#1,#2,#3,#4},
    resource grid/.cd,#1,#2,#3,#4
  },
  resource grid/list/.code={
    \foreach \i/\j [count=\k]in {#1}{%
      \global\expandafter\xdef\csname resourcegrid@list@\k\endcsname{\j}}
  },
  resource grid/legend/.style={
    legend/\pgfkeysvalueof{/pgfplots/next tick}-legend/.style={#1}
  },
  resource grid/.cd,
  layers/.style={layers/.cd,#1},
  layers/.search also={/tikz,/pgfplots},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.cd,
  layers/.search also={/tikz,/pgfplots},
  layers/.style={layers/.cd,#1},
  layers/xshift/.code={\pgfkeysalso{/pgfplots/xshift=#1}},
  layers/yshift/.code={\pgfkeysalso{/pgfplots/yshift=#1}},
  layers/height/.code={\pgfkeysalso{/pgfplots/height=#1}},
  layers/width/.code={\pgfkeysalso{/pgfplots/width=#1}},
  layers/.