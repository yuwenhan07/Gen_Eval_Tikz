{
  "prompt": "你将看到一段用于“图像到 LaTeX 复刻”的指导说明。\n请严格依照说明生成**可直接编译**的 LaTeX 源码（推荐 standalone + TikZ/PGFPlots）。\n仅输出 LaTeX 源码，无需解释；若有不确定参数请给出合理近似并保持结构一致。\n\n![test_9.png](../../../eval_dataset/images/test_9.png)\n# LaTeX/TikZ 科研绘图重构指导\n\n## 1. 概览\n\n此图为一个**神经网络架构流程图**，展示了两个并行的多层感知机(MC)链式结构：\n- **图形类型**：网络架构框图，包含节点、连接线和数学标记\n- **构图布局**：上下双层并行结构，左侧输入，右侧汇聚输出\n- **主要元素**：矩形节点(MC)、有向连接线、交叉连接、求和节点、数学标签\n\n## 2. 文档骨架与依赖\n\n```latex\n\\documentclass[border=5mm]{standalone}\n\\usepackage{tikz}\n\\usepackage{amsmath}\n\\usepackage{amssymb}\n\\usetikzlibrary{positioning, arrows.meta, calc, shapes.geometric}\n```\n\n**核心依赖说明**：\n- `tikz`：基础绘图\n- `positioning`：相对定位\n- `arrows.meta`：现代箭头样式\n- `calc`：坐标计算\n- `shapes.geometric`：几何形状（圆形求和节点）\n\n## 3. 版面与画布设置\n\n- **图形尺寸**：约 12cm × 8cm\n- **坐标系**：相对定位，节点间距 2.5cm（水平）× 2cm（垂直）\n- **对齐方式**：网格对齐，垂直居中\n- **画布参数**：\n```latex\n\\begin{tikzpicture}[\n    node distance=2.5cm and 2cm,\n    >=Stealth\n]\n```\n\n## 4. 字体与配色\n\n- **字体族**：Computer Modern（LaTeX默认）\n- **节点标签**：`\\normalsize` MC\n- **数学标签**：`\\small` 斜体变量名\n- **输入标签**：`\\normalsize` 正体\n- **配色方案**：\n  - 节点边框：黑色 `black`\n  - 节点填充：白色 `white`\n  - 连接线：黑色 `black`\n  - 背景：透明\n\n## 5. 结构与组件样式\n\n### 节点样式\n```latex\n% MC节点\nmc/.style={\n    rectangle,\n    draw=black,\n    fill=white,\n    minimum width=1.2cm,\n    minimum height=0.8cm,\n    font=\\normalsize\n}\n\n% 求和节点\nsum/.style={\n    circle,\n    draw=black,\n    fill=white,\n    minimum size=0.8cm,\n    font=\\large\n}\n```\n\n### 连接线样式\n```latex\n% 主连接线\nmain/.style={->, thick, black}\n\n% 交叉连接线\ncross/.style={->, black}\n```\n\n## 6. 数学/表格/图形细节\n\n- **数学标记**：使用 `$i_{V_c}$, $i_{V_{c2}}$` 等斜体变量\n- **下标处理**：多字符下标用 `{}` 包围\n- **特殊符号**：求和符号 `$\\oplus$`\n- **省略号**：使用 `$\\cdots$`\n\n## 7. 自定义宏与命令\n\n```latex\n% 定义MC节点宏\n\\newcommand{\\mcnode}[2]{\\node[mc] (#1) {MC};}\n\n% 定义标签宏\n\\newcommand{\\edgelabel}[3]{\\path (#1) -- (#2) node[midway, above, font=\\small] {$#3$};}\n```\n\n## 8. 最小可运行示例 (MWE)\n\n```latex\n\\documentclass[border=5mm]{standalone}\n\\usepackage{tikz}\n\\usepackage{amsmath}\n\\usetikzlibrary{positioning, arrows.meta, calc, shapes.geometric}\n\n\\begin{document}\n\\begin{tikzpicture}[\n    node distance=2.5cm and 2cm,\n    >=Stealth,\n    % 节点样式\n    mc/.style={\n        rectangle,\n        draw=black,\n        fill=white,\n        minimum width=1.2cm,\n        minimum height=0.8cm,\n        font=\\normalsize\n    },\n    sum/.style={\n        circle,\n        draw=black,\n        fill=white,\n        minimum size=0.8cm,\n        font=\\large\n    },\n    % 连接线样式\n    main/.style={->, thick, black},\n    cross/.style={->, black},\n    label/.style={font=\\small}\n]\n\n% 上层MC链\n\\node[mc] (mc1) {MC};\n\\node[mc, right=of mc1] (mc2) {MC};\n\\node[mc, right=of mc2] (mc3) {MC};\n\\node[right=1cm of mc3, font=\\normalsize] (dots1) {$\\cdots$};\n\\node[mc, right=1cm of dots1] (mc4) {MC};\n\n% 下层MC链\n\\node[mc, below=3cm of mc1] (mc5) {MC};\n\\node[mc, right=of mc5] (mc6) {MC};\n\\node[mc, right=of mc6] (mc7) {MC};\n\\node[right=1cm of mc7, font=\\normalsize] (dots2) {$\\cdots$};\n\\node[mc, right=1cm of dots2] (mc8) {MC};\n\n% 输入标签\n\\node[left=1cm of mc1] (vc) {$V_c$};\n\\node[left=1cm of mc5] (vh) {$V_H$};\n\n% 求和节点\n\\node[sum, right=3cm of mc4] (sum1) {$\\oplus$};\n\n% 输出\n\\node[right=1.5cm of sum1] (output) {$\\hat{y}$};\n\n% 主连接线（上层）\n\\draw[main] (vc) -- (mc1);\n\\draw[main] (mc1) -- (mc2) node[midway, above, label] {$i_{V_c}$};\n\\draw[main] (mc2) -- (mc3) node[midway, above, label] {$i_{V_{c2}}$};\n\\draw[main] (mc3) -- (dots1);\n\\draw[main] (dots1) -- (mc4);\n\n% 主连接线（下层）\n\\draw[main] (vh) -- (mc5);\n\\draw[main] (mc5) -- (mc6) node[midway, above, label] {$i_{V_H}$};\n\\draw[main] (mc6) -- (mc7) node[midway, above, label] {$i_{V_{H2}}$};\n\\draw[main] (mc7) -- (dots2);\n\\draw[main] (dots2) -- (mc8);\n\n% 交叉连接\n\\draw[cross] (mc1) -- (mc6) node[midway, above right, label] {$i_{c1}$};\n\\draw[cross] (mc2) -- (mc7) node[midway, above right, label] {$i_{V_{c2}}$};\n\\draw[cross] (mc5) -- (mc2) node[midway, below right, label] {$i_{H1}$};\n\\draw[cross] (mc6) -- (mc3) node[midway, below right, label] {$i_{V_{H2}}$};\n\n% 输出连接\n\\draw[main] (mc4) -- (sum1) node[midway, above, label] {$i_{V_c}$};\n\\draw[main] (mc\n",
  "final_latex_code": "\\documentclass[border=5mm]{standalone}\n\\usepackage{tikz}\n\\usepackage{amsmath}\n\\usetikzlibrary{positioning, arrows.meta, calc, shapes.geometric}\n\n\\begin{document}\n\\begin{tikzpicture}[\n    node distance=2.5cm and 2cm,\n    >=Stealth,\n    % 节点样式\n    mc/.style={\n        rectangle,\n        draw=black,\n        fill=white,\n        minimum width=1.2cm,\n        minimum height=0.8cm,\n        font=\\normalsize\n    },\n    sum/.style={\n        circle,\n        draw=black,\n        fill=white,\n        minimum size=0.8cm,\n        font=\\large\n    },\n    % 连接线样式\n    main/.style={->, thick, black},\n    cross/.style={->, black},\n    label/.style={font=\\small}\n]\n\n% 上层MC链\n\\node[mc] (mc1) {MC};\n\\node[mc, right=of mc1] (mc2) {MC};\n\\node[mc, right=of mc2] (mc3) {MC};\n\\node[right=1cm of mc3, font=\\normalsize] (dots1) {$\\cdots$};\n\\node[mc, right=1cm of dots1] (mc4) {MC};\n\n% 下层MC链\n\\node[mc, below=3cm of mc1] (mc5) {MC};\n\\node[mc, right=of mc5] (mc6) {MC};\n\\node[mc, right=of mc6] (mc7) {MC};\n\\node[right=1cm of mc7, font=\\normalsize] (dots2) {$\\cdots$};\n\\node[mc, right=1cm of dots2] (mc8) {MC};\n\n% 输入标签\n\\node[left=1cm of mc1] (vc) {$V_{\\mathcal{L}}$};\n\\node[left=1cm of mc5] (vh) {$V_{\\mathcal{H}}$};\n\n% 求和节点\n\\node[sum, right=3cm of mc4] (sum1) {$\\oplus$};\n\n% 输出\n\\node[right=1.5cm of sum1] (output) {$\\hat{y}$};\n\n% 主连接线（上层）\n\\draw[main] (vc) -- (mc1);\n\\draw[main] (mc1) -- (mc2) node[midway, above, label] {$i_{\\mathcal{L}_1}$};\n\\draw[main] (mc2) -- (mc3) node[midway, above, label] {$i_{\\mathcal{V}_{\\mathcal{L}_2}}$};\n\\draw[main] (mc3) -- (dots1);\n\\draw[main] (dots1) -- (mc4);\n\n% 主连接线（下层）\n\\draw[main] (vh) -- (mc5);\n\\draw[main] (mc5) -- (mc6) node[midway, above, label] {$i_{\\mathcal{H}_1}$};\n\\draw[main] (mc6) -- (mc7) node[midway, above, label] {$i_{\\mathcal{V}_{\\mathcal{H}_2}}$};\n\\draw[main] (mc7) -- (dots2);\n\\draw[main] (dots2) -- (mc8);\n\n% 交叉连接\n\\draw[cross] (mc1) -- (mc6) node[midway, above right, label] {$i_{\\mathcal{L}_1}$};\n\\draw[cross] (mc2) -- (mc7) node[midway, above right, label] {$i_{\\mathcal{V}_{\\mathcal{L}_2}}$};\n\\draw[cross] (mc5) -- (mc2) node[midway, below right, label] {$i_{\\mathcal{H}_1}$};\n\\draw[cross] (mc6) -- (mc3) node[midway, below right, label] {$i_{\\mathcal{V}_{\\mathcal{H}_2}}$};\n\n% 输出连接\n\\draw[main] (mc4) -- (sum1) node[midway, above, label] {$\\hat{i}_{\\mathcal{V}_{\\mathcal{L}}}$};\n\\draw[main] (mc8) -- (sum1) node[midway, above, label] {$\\hat{i}_{\\mathcal{V}_{\\mathcal{H}}}$};\n\\draw[main] (sum1) -- (output);\n\n\\end{tikzpicture}\n\\end{document}",
  "compiled_successfully": true,
  "ground_truth": "\\documentclass{article}\n\\usepackage[colorlinks=true,linkcolor=blue, citecolor=blue, filecolor=blue, urlcolor=blue]{hyperref}\n\\usepackage{amsmath}\n\\usepackage{tikz}\n\\usetikzlibrary{shapes.geometric,shapes.arrows,decorations.pathmorphing,\ndecorations.markings,decorations.pathreplacing}\n\\usetikzlibrary{matrix,chains,scopes,positioning,arrows,fit,spy,calligraphy}\n\n\\begin{document}\n\n\\begin{tikzpicture}[auto, node distance=2cm, >=latex]\n\\tikzstyle{block} = [draw, minimum height=0.75cm, minimum width=0.8cm, scale=0.8]\n\\tikzstyle{wrapper} = [draw, minimum height=0.75cm, minimum width=0.8cm, inner sep=9pt]\n\n\\node (low_vis) at (0, 0) [above=10pt]{$\\text{V}_\\mathcal{L}$};\n\n\\node (mc1l) at (low_vis.east) [block, right=25pt] {MC};\n\\node (mc2l) at (mc1l.east) [block, right=20pt] {MC};\n\\node (mc3l) at (mc2l.east) [block, right=20pt] {MC};\n\\node (low_ell) at (mc3l.east) [minimum height=0.75cm, minimum width=0.75cm, right=1pt] {$\\cdots$};\n\\node (mcnl) at (low_ell.east) [block, right=0pt] {MC};\n\n\\draw [->] (low_vis) edge (mc1l);\n\\draw [->] (mc1l) -- node [midway, above=0pt] {$i_{\\mathcal{L}_1}$} (mc2l); \n\\draw [->] (mc2l) -- node [midway, above=0pt] {$i_{{\\text{V}_\\mathcal{L}}_2}$} (mc3l); \n\n\\node[fit=(mc1l)(mc2l)(mcnl), wrapper](vlnode){};\n\n\\node (full_vis) at (low_vis.south)[below=60pt]{$\\text{V}_\\mathcal{H}$};\n\n\\node (mc1h) at (full_vis.east) [block, right=25pt] {MC};\n\\node (mc2h) at (mc1h.east) [block, right=20pt] {MC};\n\\node (mc3h) at (mc2h.east) [block, right=20pt] {MC};\n\\node (low_ell) at (mc3h.east) [minimum height=0.75cm, minimum width=0.75cm, right=1pt] {$\\cdots$};\n\\node (mcnh) at (low_ell.east) [block, right=0pt] {MC};\n\n\\draw [->] (full_vis) edge (mc1h);\n\\draw [->] (mc1h) -- node [midway, above=0pt] {$i_{\\mathcal{H}_1}$} (mc2h); \n\\draw [->] (mc2h) -- node [midway, above=0pt] {$i_{{\\text{V}_\\mathcal{H}}_2}$} (mc3h); \n\n\\draw [->] (mc1h) -- node [midway, below left=6pt] {$i_{\\mathcal{H}_1}$} (mc2l); \n\\draw [->] (mc2h) -- node [midway, below left=6pt] {$i_{{\\text{V}_\\mathcal{H}}_2}$} (mc3l); \n\\draw [->] (mc1l) -- node [midway, above left=6pt] {$i_{\\mathcal{L}_1}$} (mc2h); \n\\draw [->] (mc2l) -- node [midway, above left=6pt] {$i_{{\\text{V}_\\mathcal{L}}_2}$} (mc3h); \n\n\\node[fit=(mc1h)(mc2h)(mcnh), wrapper](vhnode){};\n\n\\node[fit=(mcnl)(mcnh)](centeringnode){};\n\\node (comb) at (centeringnode.east)[right=30pt]{$\\oplus$};\n\\node (dummyout) at (comb.east)[right=20pt]{};\n\n\\draw [->] (vlnode.east) -- node [midway, right=3pt] {$\\hat{\\imath}_{\\text{V}_\\mathcal{L}}$} (comb); \n\\draw [->] (vhnode.east) -- node [midway, right=3pt] {$\\hat{\\imath}_{\\text{V}_\\mathcal{H}}$} (comb); \n\\draw [->] (comb) -- node [midway, above=2pt] {$\\hat{\\imath}$} (dummyout); \n\n\\end{tikzpicture}\n\n\\end{document}",
  "attempts": 1,
  "temperature": 0.8,
  "max_new_tokens": 2048,
  "max_attempts": 5,
  "lora_path": "/home/yuwenhan/LLaMA-Factory/saves/Qwen2.5-VL-7B-Instruct/lora/train_2025-09-06-16-37-47/checkpoint-40",
  "lora_merged": false,
  "dtype": "auto",
  "device": "multi-GPU (device_map=auto)",
  "base_model": "/mnt/data/model/Qwen2.5-VL-32B-Instruct",
  "instruction_path": "/home/yuwenhan/Tikz/Gen_Eval_Tikz/two_strategies/instruction/claude-sonnet-4-20250514/test_9.md",
  "image_path": "../eval_dataset/images/test_9.png",
  "used_instruction": true,
  "two_stage": true,
  "require_instruction": false
}