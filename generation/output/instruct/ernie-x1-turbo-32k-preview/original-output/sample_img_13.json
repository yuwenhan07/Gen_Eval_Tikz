{
  "prompt": "你将看到一段用于“图像到 LaTeX 复刻”的指导说明。\n请严格依照说明生成**可直接编译**的 LaTeX 源码（推荐 standalone + TikZ/PGFPlots）。\n仅输出 LaTeX 源码，无需解释；若有不确定参数请给出合理近似并保持结构一致。\n\n![test_13.png](../../../eval_dataset/images/test_13.png)\n### 概览\n- **图形类型**：流程图（含决策节点、操作节点、连接箭头）\n- **构图布局**：纵向分层结构，顶部输入/底部输出，左右对称分支\n- **主要元素关系**：矩形节点通过带箭头路径连接，决策节点采用菱形，标注条件判断\n\n### 文档骨架与依赖\n```latex\n\\documentclass[tikz]{standalone}\n\\usetikzlibrary{arrows.meta, positioning, shapes.geometric, calc}\n\\usepackage{xcolor}\n\\usepackage{fontspec} % 需XeLaTeX/LuaTeX编译\n```\n\n### 版面与画布设置\n- 图形尺寸：`width=12cm, height=8cm`\n- 坐标系范围：`x=0.5cm, y=0.5cm`\n- 节点间距：`node distance=1.5cm and 2cm`\n- 对齐方式：`baseline`对齐数学公式节点\n- 环境参数：\n  ```latex\n  \\begin{tikzpicture}[\n    node distance=1.5cm and 2cm,\n    on grid,\n    auto\n  ]\n  ```\n\n### 字体与配色\n- **字体**：Latin Modern 10pt，数学公式使用`\\mathrm`\n- **主色**：`NavyBlue` (#0066CC) 用于边框，`ForestGreen` (#228B22) 用于决策节点\n- **辅助色**：`OrangeRed` (#FF4500) 用于关键路径\n- **渐变**：决策节点采用`top color=green!10, bottom color=green!30`\n- **阴影**：`drop shadow`效果需`\\usetikzlibrary{shadows}`\n\n### 结构与组件样式\n- **节点样式**：\n  ```latex\n  \\tikzstyle{decision} = [\n    diamond, \n    draw=NavyBlue, \n    fill=green!20, \n    minimum width=2cm, \n    inner sep=0pt,\n    drop shadow\n  ]\n  \\tikzstyle{process} = [\n    rectangle, \n    draw=black!70, \n    fill=blue!10, \n    minimum width=3cm, \n    minimum height=1cm\n  ]\n  ```\n- **箭头样式**：`-{Stealth[scale=1.5]}`，线宽0.8pt\n- **坐标轴**：无物理坐标轴，采用相对定位\n\n### 数学/表格/图形细节\n- **公式节点**：`node [process] {$x = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$}`\n- **表格**：使用`\\matrix`嵌套`\\node`实现表格布局\n- **曲线示例**：\n  ```latex\n  \\draw[smooth, tension=0.5] plot coordinates {(0,0) (1,1) (2,0)};\n  ```\n\n### 自定义宏与命令\n```latex\n\\newcommand{\\proc}[2]{\n  \\node [process] (#1) {#2};\n}\n\\newcommand{\\dec}[2]{\n  \\node [decision] (#1) {#2};\n}\n\\newcommand{\\patharrow}[3]{\n  \\draw[-{Stealth[scale=1.5]}] (#1) -- (#2) node [#3] {};\n}\n```\n\n### 最小可运行示例 (MWE)\n```latex\n\\documentclass[tikz]{standalone}\n\\usepackage{tikz}\n\\usetikzlibrary{arrows.meta, shapes.geometric, shadows}\n\\begin{document}\n\\begin{tikzpicture}[\n    node distance=1.5cm and 2cm,\n    auto,\n    font=\\small\\sffamily,\n    >={Stealth[scale=1.5]}\n  ]\n  \n  % Nodes\n  \\node [process] (start) {Start};\n  \\node [decision, below of=start] (dec1) {Condition?};\n  \\node [process, below left=of dec1] (proc1) {Process A};\n  \\node [process, below right=of dec1] (proc2) {Process B};\n  \n  % Arrows\n  \\draw[->] (start) -- (dec1);\n  \\draw[->] (dec1) -| node[near start] {yes} (proc1);\n  \\draw[->] (dec1) -| node[near start] {no} (proc2);\n  \\draw[->] (proc1) |- ++(0,-1) -| (end);\n  \\draw[->] (proc2) |- ++(0,-1) -| (end);\n  \n  % End node\n  \\node [process, below=2cm of dec1] (end) {End};\n  \n  % Shadows\n  \\begin{pgfonlayer}{background}\n    \\filldraw[inner sep=3pt, draw=black!30, fill=gray!5, rounded corners]\n      (dec1.north west) rectangle (end.south east);\n  \\end{pgfonlayer}\n\\end{tikzpicture}\n\\end{document}\n```\n\n### 复刻检查清单\n- [x] 图形尺寸：12cm×8cm\n- [x] 节点样式：矩形/菱形+阴影\n- [x] 字体：Latin Modern 10pt\n- [x] 配色：蓝/绿主色系\n- [x] 线型：Stealth箭头，0.8pt线宽\n- [x] 特殊效果：渐变填充+阴影\n- [ ] 差异点：原图可能存在未注明的透明度效果\n\n### 风险与替代方案\n- **颜色匹配风险**：RGB色值可能需微调，建议使用`\\definecolor`预定义\n- **字体替代**：若无指定字体，可用`\\renewcommand{\\sfdefault}{phv}`启用Helvetica\n- **箭头样式**：若`Stealth`不可用，可替换为`Triangle`箭头\n- **阴影效果**：`drop shadow`需编译两次确保正确渲染\n- **兼容性**：建议使用LuaLaTeX或XeLaTeX处理复杂图形\n",
  "final_latex_code": "\\documentclass[tikz,border=5mm]{standalone}\n\\usetikzlibrary{arrows.meta, decorations.pathreplacing}\n\n\\begin{document}\n\\begin{tikzpicture}[\n    >=Stealth,\n    every node/.append style={font=\\footnotesize},\n    axis/.style={help lines, black!50, thin},\n    arrow/.style={ultra thick, ->, #1},\n]\n\n% Draw coordinate grid and axes\n\\foreach \\y in {-3,...,2}\n    \\draw[axis] (-1,\\y) -- (12,\\y);\n\\foreach \\x in {0,1,...,11}\n    \\draw[axis] (\\x,-3) -- (\\x,2);\n\n% Draw i_v, j_v, a_v, b_v arrows\n\\coordinate (i_v) at (0,0);\n\\coordinate (j_v) at (4,0);\n\\coordinate (a_v) at (2,-2);\n\\coordinate (b_v) at (2,2);\n\n\\draw[arrow={blue}] (i_v) -- node[above]{$j_{v}$} (j_v);\n\\draw[arrow={blue}] (i_v) -- node[left]{$i_{v}$}++(-90:1.5) coordinate(i_v_bot);\n\\draw[arrow={red}] (a_v) -- node[right]{$a_{v}$}++(90:1.5) coordinate(a_v_top);\n\\draw[arrow={green}] (b_v) -- node[right]{$b_{v}$}++(-90:1.5) coordinate(b_v_bot);\n\n% Draw vertical lines for j(4,k) labels\n\\foreach \\k/\\label in {\n    2/{j(4,2)=0},\n    1/{j(4,1)=-1},\n    0/{j(4,0)=-\\infty},\n    -1/{j(4,-1)=-2},\n    -2/{j(4,-2)=-\\infty}}\n{\n    \\draw[arrow={orange}] (4,\\k) -- ++(1.5,0) node[right]{$\\label$};\n}\n\n% Draw horizontal lines for other j(4,k) labels\n\\draw[arrow={blue}] (4,0) -- ++(-1.5,0) node[left]{$j(4,0)=-\\infty$};\n\\draw[arrow={blue}] (4,-1) -- ++(-1.5,0) node[left]{$j(4,-1)=-2$};\n\n% Draw origin label\n\\node at (0,-3) {$(0,-3)$};\n\n\\end{tikzpicture}\n\\end{document}",
  "compiled_successfully": true,
  "ground_truth": "\\documentclass[english,11pt, reqno, oneside]{amsart}\n\\usepackage{amsmath}\n\\usepackage{amssymb}\n\\usepackage[usenames,dvipsnames]{xcolor}\n\\usepackage[colorlinks=true,linkcolor=blue!95!black, citecolor = green!55!black,bookmarksdepth=3]{hyperref}\n\\usepackage{tikz}\n\\usetikzlibrary{calc}\n\\usetikzlibrary{math}\n\\usetikzlibrary{decorations.markings, decorations.pathreplacing,shapes.misc}\n\n\\begin{document}\n\n\\begin{tikzpicture}[scale=0.7]\n\n\\begin{scope}[shift={(-7.5,1.5)}, scale=0.9]\n\n\\draw[line width=1pt] (0,0) -- ++(3,0);\n\\draw[line width=1pt] (1.5,-1.5) -- ++(0,3);\n\n\\node[anchor = east] at (0,0) {$i_v$};\n\\node[anchor = west] at (3,0) {$j_v$};\n\\node[anchor = north] at (1.5,-1.5) {$a_v$};\n\\node[anchor = south] at (1.5,1.5) {$b_v$};\n\\end{scope}\n\n\\draw (0,-1) grid (4,4.4);\n\n\\draw[red, very thick, ->] (0,0) -- ++(1,0) -- ++(0,1) -- ++(3,0);\n\n\\draw[blue, very thick, ->] (0,1) -- ++(1,0) -- ++(0,1) -- ++(2,0) -- ++(0,1) -- ++(1,0);\n\n\\draw[green!60!black, very thick, ->] (0,3) -- ++(1,0) -- ++(0,1.4);\n\n\\draw[orange, very thick, ->] (0,2) -- ++(1,0) -- ++(0,1) -- ++(1,0) -- ++(0,1) -- ++(2,0);\n\n\\draw[cyan, very thick, ->] (0,4) -- ++(2,0)-- ++(0,0.4);\n\n\n\n\\foreach \\x in {-2,...,2}\n{\n  \\node[anchor=east, scale=0.8] at (0,\\x+2) {$\\x$};\n}\n\n\\node[circle, fill, inner sep=1pt] at (0,-1) {};\n\\node[anchor=east, scale=0.8] at (0,-1) {$(0,-3)$};\n\n\\node[anchor=west, scale=0.8] at (4,0) {$j_{(4,-2)}=-\\infty$};\n\\node[anchor=west, scale=0.8] at (4,1) {$j_{(4,-1)}=-2$};\n\\node[anchor=west, scale=0.8] at (4,2) {$j_{(4,0)}=-\\infty$};\n\\node[anchor=west, scale=0.8] at (4,3) {$j_{(4,1)}=-1$};\n\\node[anchor=west, scale=0.8] at (4,4) {$j_{(4,2)}=0$};\n\n\n\\end{tikzpicture}\n\n\\end{document}",
  "attempts": 1,
  "temperature": 0.8,
  "max_new_tokens": 2048,
  "max_attempts": 5,
  "lora_path": "/home/yuwenhan/LLaMA-Factory/saves/Qwen2.5-VL-7B-Instruct/lora/train_2025-09-06-16-37-47/checkpoint-40",
  "lora_merged": false,
  "dtype": "auto",
  "device": "multi-GPU (device_map=auto)",
  "base_model": "/mnt/data/model/Qwen2.5-VL-32B-Instruct",
  "instruction_path": "/home/yuwenhan/Tikz/Gen_Eval_Tikz/two_strategies/instruction/ernie-x1-turbo-32k-preview/test_13.md",
  "image_path": "../eval_dataset/images/test_13.png",
  "used_instruction": true,
  "two_stage": true,
  "require_instruction": false
}